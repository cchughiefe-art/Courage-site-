<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Tree</title>
    <style>
        body { background: #fdf5e6; font-family: serif; text-align: center; }
        .nav { text-align: right; padding: 15px; }
        .tree { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 20px; }
        .card { background: #fff; border: 2px solid #8d775f; padding: 15px; border-radius: 10px; width: 140px; box-shadow: 2px 2px 10px rgba(0,0,0,0.1); }
        .card img { width: 90px; height: 90px; border-radius: 50%; object-fit: cover; border: 2px solid #8d775f; }
    </style>
</head>
<body>
    <div class="nav"><a href="add-family.html" style="color:#8d775f; text-decoration: none; border: 1px solid #8d775f; padding: 5px 10px; border-radius: 5px;">Edit Tree</a></div>
    <h1 style="color: #5d4037;">Our Family Tree</h1>
    <div class="tree" id="display"></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.10.0/firebase-app.js";
        import { getFirestore, collection, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/12.10.0/firebase-firestore.js";

        const config = { 
            apiKey: "AIzaSyD00bj-hV8VSdJxAyCdqqpT7VWDMb9qNTQ", 
            authDomain: "family-tree-aec4a.firebaseapp.com",
            projectId: "family-tree-aec4a",
            appId: "1:956247325424:web:94690decde56983ff42035"
        };
        const db = getFirestore(initializeApp(config));

        onSnapshot(query(collection(db, "family"), orderBy("createdAt", "asc")), (snap) => {
            const out = document.getElementById('display');
            out.innerHTML = '';
            snap.forEach((d) => {
                const m = d.data();
                out.innerHTML += `<div class="card"><img src="${m.photo}"><h4>${m.name}</h4><p>${m.relation}</p></div>`;
            });
        }, (error) => { console.error("Database Error:", error); });
    </script>
</body>
</html>

